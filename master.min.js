$('#slides').superslides({
  animation: 'fade',
  play: 5000,
  animation_speed: 7000,
  pagination: 'false'
});
var winHieght = $("#slides").outerHeight();
var menuHT = $("#home").outerHeight();
$('#home').affix({
  offset: {
    top: winHieght - menuHT,
    bottom: function() {
      return (this.bottom = $('.footer').outerHeight(true))
    }
  }
})
var controller = new ScrollMagic.Controller();
var tube = $(".tube").outerHeight();
var greyHgt = tube - 150;
var scene = new ScrollMagic.Scene({
    triggerElement: "#car",
    duration: greyHgt
  })
  .setPin("#car")
  .addTo(controller);
(function($) {
  'use strict';
  $(window).scroll(function() {
    if ($(window).scrollTop() > 1000) {
      $('a.top').fadeIn('slow');
    } else {
      $('a.top').fadeOut('slow');
    }
  });
  var winWidth = $('body').width();
  if (winWidth <= 767) {
    $('#menu .navbar-nav li a').attr('data-toggle', 'collapse');
    $('#menu .navbar-nav li a').attr('data-target', '#menu');
    $('nav a[href^=#], a.top[href^=#], a.smooth[href^=#]').on("click", function(event) {
      event.preventDefault();
      $('html,body').animate({
        scrollTop: $(this.hash).offset().top - 150
      }, 1000);
    });
    $(".subscribe").appendTo("#hidCon");
  } else {
    $('nav a[href^=#], a.top[href^=#], a.smooth[href^=#]').on("click", function(event) {
      event.preventDefault();
      $('html,body').animate({
        scrollTop: $(this.hash).offset().top - 0
      }, 1000);
    });
  }
  $('#image-slider.carousel').carousel({
    pause: 'false',
    interval: 7000
  })
  function captionReset() {
    $('.carousel .active').each(function() {
      $(this).find('.carousel-caption h3').animate({
        marginLeft: '25.250em',
        opacity: '0'
      }, 200);
      $(this).find('.carousel-caption h6').animate({
        marginLeft: '-25.250em',
        opacity: '0'
      }, 200);
    });
  }
  function carouselCustom() {
    $('.carousel .active').each(function() {
      $(this).find('.carousel-caption h3, .carousel-caption h6').animate({
        marginLeft: '0',
        opacity: '1'
      }, 400);
      $(this).find('.carousel-caption h6').animate({
        marginLeft: '0',
        opacity: '1'
      }, 400);
    });
  }
  $('#image-slider .carousel-caption h3, .carousel-caption h6').css("opacity", "0");
  $('#image-slider .carousel-caption h3').after('<br />');
  carouselCustom();
  $('#image-slider').bind('slide.bs.carousel', function(e) {
    captionReset();
  });
  $('#image-slider').bind('slid.bs.carousel', function(e) {
    carouselCustom();
  });
  $("#owl-demo").owlCarousel({
    autoPlay: 8000,
    items: 3,
    itemsDesktop: [1199, 3],
    itemsDesktopSmall: [979, 2],
    itemsTablet: [768, 2],
    itemsMobile: [600, 1],
    navigation: true,
    navigationText: ["<img class='svg' src='https://vietblogdao.github.io/fonts/arrow-left-s.svg' onerror='this.src='https://vietblogdao.github.io/images/arrow-left-s.png' alt='Prev' />", "<img class='svg' src='https://vietblogdao.github.io/fonts/arrow-right-s.svg' onerror='this.src='https://vietblogdao.github.io/images/arrow-right-s.png'' alt='Next' />"],
    pagination: false
  });
  $("#itinarary2").owlCarousel({
    navigation: true,
    navigationText: ["<img class='svg' src='https://vietblogdao.github.io/fonts/arrow-left-s.svg' onerror='this.src='https://vietblogdao.github.io/images/arrow-left-s.png' alt='Prev' />", "<img class='svg' src='https://vietblogdao.github.io/fonts/arrow-right-s.svg' onerror='this.src='https://vietblogdao.github.io/images/arrow-right-s.png'' alt='Next' />"],
    slideSpeed: 300,
    paginationSpeed: 400,
    singleItem: true,
    pagination: false
  });
  $("#galleryCarousel").owlCarousel({
    autoPlay: false,
    items: 5,
    itemsDesktop: [1199, 4],
    itemsDesktopSmall: [979, 3],
    itemsMobile: [600, 2],
    navigation: true,
    navigationText: ["<img class='svg' src='https://vietblogdao.github.io/fonts/arrow-left-s.svg' onerror='this.src='https://vietblogdao.github.io/images/arrow-left-s.png' alt='Prev' />", "<img class='svg' src='https://vietblogdao.github.io/fonts/arrow-right-s.svg' onerror='this.src='https://vietblogdao.github.io/images/arrow-right-s.png'' alt='Next' />"],
    pagination: false
  });
  $("#upcoming").owlCarousel({
    autoPlay: false,
    items: 3,
    itemsDesktop: [1199, 3],
    itemsDesktopSmall: [979, 3],
    itemsMobile: [600, 1],
    navigation: true,
    navigationText: ["<img class='svg' src='https://vietblogdao.github.io/fonts/arrow-left-s.svg' onerror='this.src='https://vietblogdao.github.io/images/arrow-left-s.png' alt='Prev' />", "<img class='svg' src='https://vietblogdao.github.io/fonts/arrow-right-s.svg' onerror='this.src='https://vietblogdao.github.io/images/arrow-right-s.png'' alt='Next' />"],
    pagination: false
  });
  $('#testimonial.carousel').carousel({
    interval: 7000
  })
  $('input, textarea').placeholder();
  $("a[data-rel^='prettyPhoto']").prettyPhoto({
    overlay_gallery: true
  });
  $('.loader').hide();
  $('img.svg').each(function() {
    var $img = $(this);
    var imgID = $img.attr('id');
    var imgClass = $img.attr('class');
    var imgURL = $img.attr('src');
    $.get(imgURL, function(data) {
      var $svg = $(data).find('svg');
      if (typeof imgID !== 'undefined') {
        $svg = $svg.attr('id', imgID);
      }
      if (typeof imgClass !== 'undefined') {
        $svg = $svg.attr('class', imgClass + ' replaced-svg');
      }
      $svg = $svg.removeAttr('xmlns:a');
      $img.replaceWith($svg);
    }, 'xml');
  });
  var wow = new WOW({
    boxClass: 'wow',
    animateClass: 'animated',
    offset: 100,
    mobile: true,
    live: true
  })
  wow.init();
}(jQuery));
equalheight = function(container) {
  var currentTallest = 0,
    currentRowStart = 0,
    rowDivs = new Array(),
    $el, topPosition = 0;
  $(container).each(function() {
    $el = $(this);
    $($el).height('auto')
    topPostion = $el.position().top;
    if (currentRowStart != topPostion) {
      for (currentDiv = 0; currentDiv < rowDivs.length; currentDiv++) {
        rowDivs[currentDiv].height(currentTallest);
      }
      rowDivs.length = 0;
      currentRowStart = topPostion;
      currentTallest = $el.height();
      rowDivs.push($el);
    } else {
      rowDivs.push($el);
      currentTallest = (currentTallest < $el.height()) ? ($el.height()) : (currentTallest);
    }
    for (currentDiv = 0; currentDiv < rowDivs.length; currentDiv++) {
      rowDivs[currentDiv].height(currentTallest);
    }
  });
}
$(window).load(function() {
  equalheight('#owl-demo .item');
});
$(window).resize(function() {
  equalheight('#owl-demo .item');
});
$('.select-location').change(function() {
  var str = '';
  $('.select-location option:selected').each(function() {
    str += $(this).attr('value');
  });
  location.href = '/search/label/' + str;
})
$('input[type=checkbox]').on('change', function() {
  $('input[name="' + this.name + '"]').not(this).prop('checked', false);
  var str = $(this).next('label').text();
  $(this).parent().find('input[type=hidden]').attr('value', str);
});
